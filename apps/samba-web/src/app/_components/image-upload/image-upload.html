<div class="image-upload-container">
  @if (previewUrl()) {
    <!-- Image Preview -->
    <div class="image-preview">
      <img [src]="previewUrl()" alt="Product preview" class="preview-image">
      <div class="image-overlay">
        <button
          mat-icon-button
          type="button"
          class="remove-btn"
          (click)="removeImage()"
          matTooltip="Remove image">
          <mf-icon
          name="solar:trash-bin-minimalistic-line-duotone"
          class="text-error dark:text-red-400"
        />
        </button>
      </div>
    </div>
  } @else {
    <!-- Upload Zone -->
    <div
      class="upload-zone"
      [class.dragging]="isDragging()"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
      (click)="triggerFileInput()"
      role="presentation">
      <mf-icon class="upload-icon" name="solar:cloud-upload-line-duotone" />
      <p class="upload-text">
        <strong>Click to upload</strong> or drag and drop
      </p>
      <p class="upload-hint">
        PNG, JPG, WebP or GIF (max. 5MB)
      </p>
    </div>
  }

  <!-- Error Message -->
  @if (error()) {
    <div class="error-message">
      <mf-icon name="solar:danger-circle-line-duotone" />
      <span>{{ error() }}</span>
    </div>
  }

  <!-- Hidden File Input -->
  <input
    id="imageUploadInput"
    type="file"
    accept="image/jpeg,image/jpg,image/png,image/webp,image/gif"
    (change)="onFileSelected($event)"
    hidden>
</div>
