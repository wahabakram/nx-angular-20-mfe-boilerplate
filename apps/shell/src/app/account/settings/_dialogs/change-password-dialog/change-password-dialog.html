<h2 mat-dialog-title>Change Password</h2>
<mat-dialog-content [formGroup]="form">
  <div class="flex flex-col mt-3 pt-3 gap-3">
    <mat-form-field class="w-full">
      <mat-label>Current Password</mat-label>
      <input matInput formControlName="currentPassword" type="password"/>
      <mat-error>
        @if (f.currentPassword.hasError('required')) {
          The current password is required.
        }
      </mat-error>
    </mat-form-field>
    <mat-form-field class="w-full">
      <mat-label>New Password</mat-label>
      <input matInput formControlName="password"
             [type]="hidePassword() ? 'password' : 'text'"/>
      <button
        mat-icon-button
        matSuffix
        type="button"
        (click)="togglePasswordVisibility()"
        aria-label="Hide or show password"
        class="me-2">
        <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>
      <mat-error>
        @if (f.password.hasError('required')) {
          The password is required.
        }
        @if (f.password.hasError('minlength')) {
          The password must contain at least 8 characters.
        }
      </mat-error>
    </mat-form-field>
    <mat-form-field class="w-full">
      <mat-label>Confirm New Password</mat-label>
      <input matInput formControlName="confirmPassword"
             [type]="hidePassword() ? 'password' : 'text'"/>
      <mat-error>
        @if (f.confirmPassword.hasError('required')) {
          Please confirm your password.
        }
        @if (f.confirmPassword.hasError('passwordMismatch')) {
          The passwords do not match.
        }
      </mat-error>
    </mat-form-field>
  </div>
</mat-dialog-content>
<mat-dialog-actions>
  <button mat-button (click)="cancel()">Cancel</button>
  <button mat-flat-button (click)="submit()"
          [disabled]="form.invalid"
          [mfButtonLoading]="saving()">Change</button>
</mat-dialog-actions>
