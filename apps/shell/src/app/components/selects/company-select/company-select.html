<button mat-stroked-button [matMenuTriggerFor]="menu">
  @if (_selectedCompany()) {
    <span class="flex items-center gap-3 grow ps-2 text-sm">
      <mf-dicebear [key]="_selectedCompany().id" class="rounded-lg size-9 shadow-xs"/>
      {{ _selectedCompany().name }}
    </span>
  } @else {
    {{ triggerText() }}
  }
</button>
<mat-menu #menu>
  <div class="w-[360px]">
    <div class="py-4 px-5">
      <div class="text-xs text-neutral-600">Switch company</div>
      <div class="mt-3 flex flex-col gap-1 -mx-2">
        @for (company of companies(); track company.id) {
          <div class="flex items-center gap-2 rounded-xl px-2 hover:bg-surface-container-highest
                      cursor-pointer h-13 [&.is-active]:bg-surface-container-highest"
               [class.is-active]="company.id === _selectedCompany()?.id"
               (click)="selectCompany(company)" matRipple>
            <div class="flex items-center gap-3 grow">
              <mf-dicebear [key]="company.id" [image]="company.logoUrl" class="rounded-lg size-9 shadow-xs"/>
              <div>
                <div>{{ company.name }}</div>
              </div>
            </div>
          </div>
        } @empty {
          <div class="text-xs mt-2 mb-1 px-2">{{ emptyText() }}</div>
        }
      </div>
    </div>
    <mf-h-divider class="mb-3"/>
    <div class="px-2 pb-1">
      <button mat-button (click)="createNew()">
        <mat-icon>add</mat-icon>
        {{ createNewText() }}
      </button>
    </div>
  </div>
</mat-menu>
