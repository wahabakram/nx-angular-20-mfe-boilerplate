<header class="font-semibold mb-5">Customer reviews</header>

<div class="flex items-center gap-3 mb-2 bg-primary-100 dark:bg-neutral-variant-950 rounded-full p-4 justify-center">
  <div class="flex" aria-label="Overall rating">
    @for (isFilled of overallRatingStars(); track $index) {
      <span [class]="isFilled ? 'text-amber-400' : 'text-neutral-300'" class="leading-none">
        <mat-icon [class.filled]="isFilled">star</mat-icon>
      </span>
    }
  </div>
  <div class="text-sm text-primary">
    {{ reviews().overallRating }} out of 5
  </div>
</div>

<div class="text-neutral-500 text-sm mb-5 mt-4 text-center">
  {{ reviews().totalRatings }} customer ratings
</div>

<div class="flex flex-col gap-3">
  @for (rating of reviews().distribution; track rating.star) {
    <div class="flex items-center gap-4"
         [attr.aria-label]="rating.percentage + '% for ' + rating.star + ' stars'">
      <span class="text-sm text-neutral-600 flex-none w-12">
        {{ rating.star }} star
      </span>
      <mat-progress-bar
        mode="determinate"
        [value]="rating.percentage"
        class="w-full h-3 rounded-full rating-progress-bar"
        aria-hidden="true"
      >
      </mat-progress-bar>
      <span class="text-sm font-medium text-neutral-600 w-10 flex-none text-right">{{ rating.percentage }}%</span>
    </div>
  }
</div>
