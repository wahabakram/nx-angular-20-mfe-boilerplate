:host {
  display: inline-block;
  position: relative;
  user-select: none;

  .crop-viewport {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden; /* This is the key: it clips the box-shadow */
  }

  /* The projected content dictates the size */
  ::ng-deep > .crop-viewport > *:first-child {
    display: block;
    max-width: 100%;
    height: auto;
  }

  .crop-selection-area {
    position: absolute;
    /* The selection is now defined by the box-shadow "hole" */
    box-shadow: 0 0 0 2000px rgba(0, 0, 0, 0.5);

    &.is-circle {
      border-radius: 50%;
    }
  }

  .crop-handles-overlay {
    position: absolute;

    &.is-circle {
      border-radius: 50%;
    }
  }

  .crop-handle {
    position: absolute;
    width: 14px;
    height: 14px;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(0, 0, 0, 0.5);
    border-radius: 50%;

    &.hidden {
      display: none;
    }
  }

  .move-handle {
    position: absolute;
    inset: 0;
    width: auto;
    height: auto;
    background: transparent;
    border: none;
    border-radius: 0;
    cursor: move;

    .is-circle & {
      border-radius: 50%;
    }
  }

  .top-left { top: -7px; left: -7px; cursor: nwse-resize; }
  .top-right { top: -7px; right: -7px; cursor: nesw-resize; }
  .bottom-left { bottom: -7px; left: -7px; cursor: nesw-resize; }
  .bottom-right { bottom: -7px; right: -7px; cursor: nwse-resize; }

  .top { top: -7px; left: 50%; transform: translateX(-50%); cursor: ns-resize; }
  .right { top: 50%; right: -7px; transform: translateY(-50%); cursor: ew-resize; }
  .bottom { bottom: -7px; left: 50%; transform: translateX(-50%); cursor: ns-resize; }
  .left { top: 50%; left: -7px; transform: translateY(-50%); cursor: ew-resize; }
}
